<!DOCTYPE html>
<html
    lang="en">
<head>
  <meta
      charset="UTF-8">
  <script type="text/javascript" src="./ps-template.js"></script>
  <title>
    Title</title>
</head>
<body>
  <div id="testarea"></div>
  <script>
    var testcases = [], testarea = document.getElementById("testarea");
    function check(node, tc){
      var checkParams = ["nodeType", "nodeValue", "nodeName", "tagName", "innerHTML"], key;
      console.log("-----------------------------------------------")
      for(var i = 0, n = []; i < checkParams.length; i++){
        key = checkParams[i];
        n[0] = node[key];
        n[1] = tc[key];
        if(n[0] == n[1]){
          console.log(key, "=", n[0], ",验证通过");
        } else {
          console.error(key, "\n应该等于[", JSON.stringify(n[0]), "]\n实际等于[", JSON.stringify(n[1]), "]验证失败");
        }
      }
      console.log("-----------------------------------------------")
    }
    function recursive(node, tc, depth){
      depth ? check(node, tc) : null;
      for(var i = 0; i < node.childNodes.length; i++){
        recursive(node.childNodes[i], tc.childNodes[i], depth+1);
      }
    }
    function assert(json){
      testarea.innerHTML = this["case"];
      recursive(testarea, json, 0);
    }
    testcases[0] = {
      "case" : "asd<div ng-repeat=\"item in repeats\" style=\"color:red\">\n\
        <input type=\"radio\"/>\n\
        <div class=\"form-control\">123</div>\
      </div>def",
      "assert" : assert
    };
    testcases[1] = {
      "case" : "\
        <div scopped>\
          <!--ppp-->\
          <div>8</div>\
          <span>123</span>\
        </div>",
      "assert" : assert
    };
    for(var i = 0, m, p, assert; i < testcases.length; i++){
      m = psTemplate.html2json(testcases[i]["case"]);
      p = psTemplate.json2html(m);
      testcases[i]["assert"](m);
      console.log(p);
      console.log("case", i, "===================验证完毕================");
    }
  </script>
</body>
</html>